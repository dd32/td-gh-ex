!function($){$.fn.extend({select2SortableOrder:function(){var e=this.filter("[multiple]");return e.each(function(){var e=$(this);if("object"!=typeof e.data("select2"))return!1;var t=e.siblings(".select2-container"),s,i=[];e.find("optgroup").each(function(e,t){i.push(t)}),e.find("option").each(function(e,t){var s=$(this).parent("optgroup").prop("label"),r=this;void 0===s&&(""===this.value||this.selected||i.push(r))}),s=$(t.find('.select2-choices li[class!="select2-search-field"]').map(function(){if(!this)return void 0;if(void 0!=$(this).data("select2Data")){var t=$(this).data("select2Data").id;return e.find('option[value="'+t+'"]')[0]}})),s.push.apply(s,i),e.children().remove(),e.append(s)}),e},select2Sortable:function(){var e=Array.prototype.slice.call(arguments,0);if($this=this.filter("[multiple]"),validMethods=["destroy"],0===e.length||"object"==typeof e[0]){var t={bindOrder:"formSubmit",sortableOptions:{placeholder:"ui-state-highlight",items:"li:not(.select2-search-field)",tolerance:"pointer"}},s=$.extend(t,e[0]);"object"!=typeof $this.data("select2")&&$this.select2(),$this.each(function(){var e=$(this),t=e.siblings(".select2-container").find(".select2-choices");switch(t.sortable(s.sortableOptions),s.bindOrder){case"sortableStop":t.on("sortstop.select2sortable",function(t,s){e.select2SortableOrder()}),e.on("change",function(e){$(this).select2SortableOrder()});break;default:e.closest("form").unbind("submit.select2sortable").on("submit.select2sortable",function(){e.select2SortableOrder()})}})}else if(!0){if(-1==$.inArray(e[0],validMethods))throw"Unknown method: "+e[0];"destroy"===e[0]&&$this.select2SortableDestroy()}return $this},select2SortableDestroy:function(){var e=this.filter("[multiple]");return e.each(function(){var e=$(this),t=e.parent().find(".select2-choices");e.closest("form").unbind("submit.select2sortable"),t.unbind("sortstop.select2sortable"),t.sortable("destroy")}),e}})}(jQuery);