jQuery(document).ready(function( $ ) {

	"use strict";

	// Sticky Sidebar
	function stickySidebar() {
		if ( $( '#page-content' ).data('sidebar-sticky') === 1 ) {		
			var SidebarOffset = 0;

			if ( $("#main-nav").attr( 'data-fixed' ) === '1' ) {
				SidebarOffset = 90;
			}

			$('.sidebar-left,.sidebar-right').stick_in_parent({
				parent: "#page-content",
				offset_top: SidebarOffset,
				spacer: '.sidebar-left-wrap,.sidebar-right-wrap'
			});
		}
	}

	$( window ).on( 'resize', function() {
		stickySidebar();
	});

	$( window ).on( 'load', function() {
		stickySidebar();
	});


	// Parallax Effect
	if ( $('.entry-header').data('parallax') == '1' ) {
		$('.entry-header').paroller();
	}

	// Navigation Hover 
	$('#top-menu,#main-menu').find('li').hover(function () {
	    $(this).children('.sub-menu').stop().fadeToggle( 200 );
	}, function() {
		$(this).children('.sub-menu').stop().fadeToggle( 200 );
	});


	// Sticky Main Navigation
	if ( $("#main-nav").attr( 'data-fixed' ) === '1' ) {
		var wpadminbar = $('#wpadminbar').length ? $('#wpadminbar').outerHeight() : 0;
		$("#main-nav").sticky({ topSpacing: wpadminbar });
	}

	// Sidebar Alt Scroll
	$('.sidebar-alt').perfectScrollbar({
		suppressScrollX : true,
		includePadding : true,
		wheelSpeed: 3.5
	});

	// Sidebar Alt
	$('.main-nav-sidebar').on('click', function () {
		$('.sidebar-alt').css( 'left','0' );
		$('.sidebar-alt-close').fadeIn(500);
	});

	// Sidebar Alt Close
	$('.sidebar-alt-close, .sidebar-alt-close-btn').on('click', function () {
		$('.sidebar-alt').css( 'left','-'+ $( ".sidebar-alt" ).outerWidth() +'px' );
		$('.sidebar-alt-close').fadeOut(500);
	});

	// Search Form
	$('.main-nav-icons').after($('.main-nav-search #searchform').remove());
	var mainNavSearch = $('#main-nav #searchform');
	
	mainNavSearch.find('#s').attr( 'placeholder', mainNavSearch.find('#s').data('placeholder') );

	$('.main-nav-search').click(function() {
		if ( mainNavSearch.css('display') === 'none' ) {
			mainNavSearch.fadeIn();
			$('.main-nav-search i:last-of-type').show();
			$('.main-nav-search i:first-of-type').hide();
		} else {
			mainNavSearch.fadeOut();
			$('.main-nav-search i:last-of-type').hide();
			$('.main-nav-search i:first-of-type').show();
		}
	});

	// Run FitVids
	$('.slider-item').fitVids();

	// Featured Slider
	$('#featured-slider').slick({
		prevArrow: '<span class="prev-arrow icon-left-open-big"></span>',
		nextArrow: '<span class="next-arrow icon-right-open-big"></span>',
		dotsClass: 'slider-dots',
		adaptiveHeight: true,
		speed: 700,
  		customPaging: function(slider, i) {
            return '';
        }
	});

	// Post Slider
	$('.post-slider').slick({
		slidesToShow: 1,
		prevArrow: '<span class="prev-arrow icon-left-open-big"></span>',
		nextArrow: '<span class="next-arrow icon-right-open-big"></span>',
		dotsClass: 'slider-dots',
		adaptiveHeight: true,
		speed: 700,
  		customPaging: function(slider, i) {
            return '';
        }
	});

	// Run FitVids
	$('.post-media').fitVids();
				

	// Infinite Scroll
	if ( $('.blog-pagination').length ) {
		
		var paginationType = $('.blog-pagination').attr('class');

		if ( paginationType.indexOf( 'load-more' ) > 0 || paginationType.indexOf( 'infinite' ) > 0 ) {

			if ( paginationType.indexOf( 'infinite' ) > 0 ) {
				paginationType = 'facebook';
			} else {
				paginationType = 'twitter';
			}

			$('.blog-grid').infinitescroll({
				navSelector: '.blog-pagination',
				nextSelector: '.blog-pagination a',
				itemSelector: '.blog-grid li',	
				behavior: paginationType,
				maxPage: 2,
				loading: {
					img: '',
					finishedMsg: '',
					msgText  : 'Load More'
				}	
					 
			}, function( newElements ) {

				$(newElements).waitForImages({
					  finished: function() {
						// Appand New Element

					  	$('.blog-grid').append(newElements);
					},
					waitForAll: true
				});
			});
		}


	var pageCount = 1,
		maxPages  =  $('.load-more').data('max-pages');


	$('.load-more').on( 'click', function() {	
		
		pageCount++;

		if ( maxPages === pageCount ) {
			$(this).delay(1000).fadeOut(500);
		}
	});


	// Scroll Top Button
	$('.scrolltop').on( 'click', function() {
		$('html, body').animate( { scrollTop : 0 }, 800 );
		return false;
	});


	$( window ).on( 'scroll', function() {
		if ($(this).scrollTop() >= 800 ) {
			$('.scrolltop').fadeIn(350);
		} else {
			$('.scrolltop').fadeOut(350);
		}
	});


	
	}

}); // end dom ready