!function(o,c,d){o.fn.tinyNav=function(e){var l=o.extend({active:"selected",header:"",indent:"- ",label:""},e);return this.each(function(){d++;var t,e=o(this),s="tinynav",n=s+d,a=".l_"+n,i=o("<select/>").attr("id",n).addClass(s+" "+n);e.is("ul,ol")&&(""!==l.header&&i.append(o("<option/>").text(l.header)),t="",e.addClass("l_"+n).find("a").each(function(){var e;for(t+='<option value="'+o(this).attr("href")+'">',e=0;e<o(this).parents("ul, ol").length-1;e++)t+=l.indent;t+=o(this).text()+"</option>"}),i.append(t),l.header||i.find(":eq("+o(a+" li").index(o(a+" li."+l.active))+")").attr("selected",!0),i.change(function(){c.location.href=o(this).val()}),o(a).after(i),l.label&&i.before(o("<label/>").attr("for",n).addClass(s+"_label "+n+"_label").append(l.label)))})}}(jQuery,this,0),function(g){var h="selectbox",f=!1;function e(){this._state=[],this._defaults={classHolder:"sb-holder",classHolderDisabled:"sb-holder-disabled",classSelector:"sb-selector",classOptions:"sb-options",classGroup:"sb-group",classSub:"sb-sub",classDisabled:"sb-disabled",classToggleOpen:"sb-toggle-open",classToggle:"sb-toggle",classFocus:"sb-focus",speed:200,effect:"slide",onChange:null,onOpen:null,onClose:null}}g.extend(e.prototype,{_isOpenSelectbox:function(e){return e?this._getInst(e).isOpen:f},_isDisabledSelectbox:function(e){return e?this._getInst(e).isDisabled:f},_attachSelectbox:function(l,e){if(this._getInst(l))return f;var t,o,c,d,s=g(l),r=this,u=r._newInst(s),p=f,n=(s.find("optgroup"),s.find("option")),b=n.length;function a(){var e,t,s=this.attr("id").split("_")[1];for(e in r._state)e!==s&&r._state.hasOwnProperty(e)&&(t=g("select[sb='"+e+"']")[0])&&r._closeSelectbox(t)}function i(e,t){var a=!(!t||!t.sub),i=!(!t||!t.disabled);e.each(function(e){var t,s=g(this),n=g("<li>");s.is(":selected")&&(o.text(s.text()),p=!0),e===b-1&&n.addClass("last"),s.is(":disabled")||i?(t=g("<span>",{text:s.text()}).addClass(u.settings.classDisabled),a&&t.addClass(u.settings.classSub)):(t=g("<a>",{href:s.val(),rel:s.val()}).text(s.text()).bind("click.sb",function(e){e&&e.preventDefault&&e.preventDefault();var t=c,s=g(this);t.attr("id").split("_")[1];r._changeSelectbox(l,s.attr("rel"),s.text()),r._closeSelectbox(l)}).bind("mouseover.sb",function(){var e=g(this);e.parent().siblings().find("a").removeClass(u.settings.classFocus),e.addClass(u.settings.classFocus)}).bind("mouseout.sb",function(){g(this).removeClass(u.settings.classFocus)}),a&&t.addClass(u.settings.classSub),s.is(":selected")&&t.addClass(u.settings.classFocus)),t.appendTo(n),n.appendTo(d)})}s.attr("sb",u.uid),g.extend(u.settings,r._defaults,e),r._state[u.uid]=f,s.hide(),t=g("<div>",{id:"sbHolder_"+u.uid,class:u.settings.classHolder,tabindex:s.attr("tabindex")}),o=g("<a>",{id:"sbSelector_"+u.uid,href:"#",class:u.settings.classSelector,click:function(e){e.preventDefault(),a.apply(g(this),[]);var t=g(this).attr("id").split("_")[1];r._state[t]?r._closeSelectbox(l):r._openSelectbox(l)}}),(c=g("<a>",{id:"sbToggle_"+u.uid,href:"#",class:u.settings.classToggle,click:function(e){e.preventDefault(),a.apply(g(this),[]);var t=g(this).attr("id").split("_")[1];r._state[t]?r._closeSelectbox(l):r._openSelectbox(l)}})).appendTo(t),d=g("<ul>",{id:"sbOptions_"+u.uid,class:u.settings.classOptions,css:{display:"none"}}),s.children().each(function(e){var t,s=g(this),n={};s.is("option")?i(s):s.is("optgroup")&&(t=g("<li>"),g("<span>",{text:s.attr("label")}).addClass(u.settings.classGroup).appendTo(t),t.appendTo(d),s.is(":disabled")&&(n.disabled=!0),n.sub=!0,i(s.find("option"),n))}),p||o.text(n.first().text()),g.data(l,h,u),t.data("uid",u.uid).bind("keydown.sb",function(e){var t,s=e.charCode?e.charCode:e.keyCode?e.keyCode:0,n=g(this),a=n.data("uid"),i=n.siblings("select[sb='"+a+"']").data(h),l=n.siblings(["select[sb='",a,"']"].join("")).get(0),o=n.find("ul").find("a."+i.settings.classFocus);switch(s){case 37:case 38:0<o.length&&(g("a",n).removeClass(i.settings.classFocus),0<(t=o.parent().prevAll("li:has(a)").eq(0).find("a")).length&&(t.addClass(i.settings.classFocus).focus(),g("#sbSelector_"+a).text(t.text())));break;case 39:case 40:g("a",n).removeClass(i.settings.classFocus),0<(t=0<o.length?o.parent().nextAll("li:has(a)").eq(0).find("a"):n.find("ul").find("a").eq(0)).length&&(t.addClass(i.settings.classFocus).focus(),g("#sbSelector_"+a).text(t.text()));break;case 13:0<o.length&&r._changeSelectbox(l,o.attr("rel"),o.text()),r._closeSelectbox(l);break;case 9:l&&(i=r._getInst(l))&&(0<o.length&&r._changeSelectbox(l,o.attr("rel"),o.text()),r._closeSelectbox(l));var c=parseInt(n.attr("tabindex"),10);e.shiftKey?c--:c++,g("*[tabindex='"+c+"']").focus();break;case 27:r._closeSelectbox(l)}return e.stopPropagation(),!1}).delegate("a","mouseover",function(e){g(this).addClass(u.settings.classFocus)}).delegate("a","mouseout",function(e){g(this).removeClass(u.settings.classFocus)}),o.appendTo(t),d.appendTo(t),t.insertAfter(s),g("html").on("mousedown",function(e){e.stopPropagation(),g("select").selectbox("close")}),g([".",u.settings.classHolder,", .",u.settings.classSelector].join("")).mousedown(function(e){e.stopPropagation()})},_detachSelectbox:function(e){var t=this._getInst(e);if(!t)return f;g("#sbHolder_"+t.uid).remove(),g.data(e,h,null),g(e).show()},_changeSelectbox:function(e,t,s){var n,a=this._getInst(e);a&&(n=this._get(a,"onChange"),g("#sbSelector_"+a.uid).text(s)),t=t.replace(/\'/g,"\\'"),g(e).find("option[value='"+t+"']").attr("selected",!0),a&&n?n.apply(a.input?a.input[0]:null,[t,a]):a&&a.input&&a.input.trigger("change")},_enableSelectbox:function(e){var t=this._getInst(e);if(!t||!t.isDisabled)return f;g("#sbHolder_"+t.uid).removeClass(t.settings.classHolderDisabled),t.isDisabled=f,g.data(e,h,t)},_disableSelectbox:function(e){var t=this._getInst(e);if(!t||t.isDisabled)return f;g("#sbHolder_"+t.uid).addClass(t.settings.classHolderDisabled),t.isDisabled=!0,g.data(e,h,t)},_optionSelectbox:function(e,t,s){var n=this._getInst(e);if(!n)return f;n[t]=s,g.data(e,h,n)},_openSelectbox:function(e){var t,s,n,a,i,l,o,c=this._getInst(e);!c||c.isOpen||c.isDisabled||(t=g("#sbOptions_"+c.uid),s=parseInt(g(window).height(),50),n=g("#sbHolder_"+c.uid).offset(),a=g(window).scrollTop(),i=t.prev().height(),l=s-(n.top-a)-i/2,o=this._get(c,"onOpen"),t.css({top:i+"px",maxHeight:l-i+"px"}),"fade"===c.settings.effect?t.fadeIn(c.settings.speed):t.slideDown(c.settings.speed),g("#sbToggle_"+c.uid).addClass(c.settings.classToggleOpen),this._state[c.uid]=!0,c.isOpen=!0,o&&o.apply(c.input?c.input[0]:null,[c]),g.data(e,h,c))},_closeSelectbox:function(e){var t,s=this._getInst(e);s&&s.isOpen&&(t=this._get(s,"onClose"),"fade"===s.settings.effect?g("#sbOptions_"+s.uid).fadeOut(s.settings.speed):g("#sbOptions_"+s.uid).slideUp(s.settings.speed),g("#sbToggle_"+s.uid).removeClass(s.settings.classToggleOpen),this._state[s.uid]=f,s.isOpen=f,t&&t.apply(s.input?s.input[0]:null,[s]),g.data(e,h,s))},_newInst:function(e){return{id:e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:e,uid:Math.floor(99999999*Math.random()),isOpen:f,isDisabled:f,settings:{}}},_getInst:function(e){try{return g.data(e,h)}catch(e){throw"Missing instance data for this selectbox"}},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]}}),g.fn.selectbox=function(e){var t=Array.prototype.slice.call(arguments,1);return"string"==typeof e&&"isDisabled"==e||"option"==e&&2==arguments.length&&"string"==typeof arguments[1]?g.selectbox["_"+e+"Selectbox"].apply(g.selectbox,[this[0]].concat(t)):this.each(function(){"string"==typeof e?g.selectbox["_"+e+"Selectbox"].apply(g.selectbox,[this].concat(t)):g.selectbox._attachSelectbox(this,e)})},g.selectbox=new e,g.selectbox.version="0.2"}(jQuery),jQuery(function(){jQuery("#hgroup-wrap .menu").tinyNav({active:"current-menu-item",header:""}),jQuery("#secondary-menu .menu").tinyNav({active:"current-menu-item",header:""})}),jQuery(function(){jQuery(".tinynav").selectbox()}),jQuery(document).ready(function(){jQuery(".menu-item").has("ul").children("a").attr("aria-haspopup","true")});
